Ext.define("laporan.ButtonDoc",{extend:"Ext.button.Segmented",xtype:"laporan-button-doc",width:220,items:[{text:"Html",doc:{TYPE:"Html",EXT:"html"}},{text:"Word",doc:{TYPE:"Word",EXT:"doc"}},{text:"Excel",doc:{TYPE:"Excel",EXT:"xls"}},{text:"Pdf",pressed:true,doc:{TYPE:"Pdf",EXT:"pdf"}}],getDocType:function(){var d=this,c=d.down("[pressed=true]");return c.doc}});Ext.define("laporan.DataView",{extend:"Ext.view.View",alias:"widget.laporan-data-view",viewModel:{stores:{store:{type:"store"}}},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this,a=b.getViewModel().get("store");if(a){b.setLoading(true);a.removeAll();a.load(function(){b.setLoading(false)})}}});Ext.define("laporan.Filter",{extend:"com.Form",xtype:"laporan-filter",layout:{type:"vbox",align:"stretch"},cls:"x-br-right",defaultType:"datefield",minHeight:90,initComponent:function(){var a=this;a.callParent();a.add([{reference:"awal",emptyText:"[Periode Awal]",fieldLabel:"Periode Awal",format:"d-m-Y",value:a.getSysdate()},{reference:"akhir",emptyText:"[Periode Akhir]",fieldLabel:"Periode Akhir",format:"d-m-Y",value:a.getSysdate()}])},getParameters:function(){var d=this.down("[reference=awal]").getValue(),c=this.down("[reference=akhir]").getValue();return{PARAMETER:{TGLAWAL:Ext.Date.format(d,"Y-m-d")+" 00:00:00",TGLAKHIR:Ext.Date.format(c,"Y-m-d")+" 23:59:59"}}}});Ext.define("laporan.Workspace",{extend:"com.Tab",xtype:"workspace-laporan",controller:"workspace-laporan",viewModel:{stores:{store:{type:"jenis-laporan-store",queryParams:{LEVEL:1}}}},layout:{type:"hbox",align:"stretch"},cls:"x-br-top",ui:"header-tab",defaults:{border:false,listeners:{requestreport:"onRequertReport"}},load:function(e){var c=this,b=c.getViewModel(),d=c.app.xpriv,a=b.get("store");if(a){c.setLoading(true);a.doAfterLoad=function(h,g,i,f){Ext.Array.each(g,function(j){if(d(j.get("MODULE",true))){c.add({title:j.get("DESKRIPSI"),xtype:j.get("NAMA_KLAS")})}});c.setLoading(false);c.setActiveTab(0)};a.removeAll();a.load()}}});Ext.define("laporan.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan",onRequertReport:function(f,d,e){this.getView().fireEvent("requestreport",f,d,e)}});Ext.define("laporan.inventory.DataView",{extend:"Ext.view.View",alias:"widget.inventory-data-view",viewModel:{type:"inventorymodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.inventory.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.inventorymodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"16",STATUS:1}}}});Ext.define("laporan.inventory.Workspace",{extend:"com.Form",xtype:"workspace-laporan-inventory",controller:"workspace-laporan-inventory",viewModel:{stores:{jeniskategoristore:{type:"kategori-store",queryParams:{JENIS:2,STATUS:1}},store:{type:"barang-store"}}},layout:"border",cls:"x-br-top",border:false,initComponent:function(){var b=this;b.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",reference:"carabayarref",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar]"},{xtype:"combobox",displayField:"NAMA",reference:"jeniskategori",valueField:"ID",emptyText:"[Jenis Kategori]",bind:{store:"{jeniskategoristore}"}},{xtype:"checkboxfield",hideLabel:true,margin:"0 6 0 0",inputValue:"1",reference:"cekaktif",uncheckedValue:"0",boxLabel:"Aktif",listeners:{change:"onLoad"}},{xtype:"combobox",reference:"jenisbarang",emptyText:"[ Nama Barang ]",queryMode:"remote",hideTrigger:true,queryParam:"QUERY",displayField:"NAMA",valueField:"ID",minChars:2,bind:{store:"{store}"},tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item">','<div class="thumb-wrap">','<div class="thumb">',"<div>[ {NAMA} ] </div>","</div>","</div>","</div>","</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{NAMA}","</tpl>")},{xtype:"combobox",name:"RUANGAN",allowBlank:false,enterFocus:true,reference:"ruanganref",enforceMaxLength:true,forceSelection:true,validateOnBlur:true,displayField:"DESKRIPSI",valueField:"ID",queryMode:"local",typeAhead:true,emptyText:"[Ruangan]",store:{model:"data.model.Ruangan"},listeners:{specialkey:"onFocusEnter",select:"onSelectRuangan"}},{xtype:"laporan-button-doc",reference:"doctype",height:30}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"16",STATUS:1}}}},border:false,reference:"inventoryView",listeners:{select:"onSelectReport"}}];b.callParent(arguments)},listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.inventory.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-inventory",onAfterRender:function(){var c=this,b=c.getReferences(),a=c.getView();b.inventoryView.load();b.ruanganref.getStore().loadData(a.getPenggunaRuangan())},onFocusEnter:function(a,b){if(b.getKey()===b.ENTER){this.getView().fireEvent("addbarang")}},onSelectRuangan:function(b,a){this.getView().fireEvent("select",a,1)},onSelectReport:function(k,i){var b=this.getReferences(),c=b.filter.getParameters(),j=b.carabayarref.getSelection()?b.carabayarref.getSelection().get("ID"):"0",e=b.jeniskategori.getSelection()?b.jeniskategori.getSelection().get("ID"):"0",h=b.jenisbarang.getSelection()?b.jenisbarang.getSelection().get("ID"):"0",g=b.ruanganref.getSelection(),f=g?g.get("ID"):"0",n=g?g.get("JENIS_KUNJUNGAN"):"0",m=Ext.JSON.decode(i.get("REPORT_PARAMS")),l=b.doctype.getDocType();c.PARAMETER.CARABAYAR=j;c.PARAMETER.KATEGORI=e;c.PARAMETER.BARANG=h;c.PARAMETER.LAPORAN=n;c.PARAMETER.RUANGAN=f;m=Ext.apply(m,c);m=Ext.apply(m,l);m.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",i.get("DESKRIPSI"),m,true);b.inventoryView.deselect(i)},onLoad:function(){var d=this,c=d.getReferences(),a=(c.cekaktif.getValue())?1:0,b=c.jenisbarang.getStore();b.setQueryParams({STATUS:a});b.load()}});Ext.define("laporan.jasapelayanan.DataView",{extend:"Ext.view.View",alias:"widget.jasapelayanan-data-view",viewModel:{type:"jasapelayananmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.jasapelayanan.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.jasapelayananmodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"15",STATUS:1}}}});Ext.define("laporan.jasapelayanan.Workspace",{extend:"Ext.form.Panel",xtype:"workspace-laporan-jasapelayanan",controller:"workspace-laporan-jasapelayanan",layout:"border",cls:"x-br-top",border:false,initComponent:function(){var b=this;b.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar]",reference:"carabayar"},{xtype:"dokter-combo",height:30,emptyText:"[Dokter]",reference:"dokterref"},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelect"}},{xtype:"ruangan-tree",reference:"treeJasaPelayanan",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"15",STATUS:1}}}},border:false,reference:"JasaPelayananView",listeners:{select:"onSelectReport"}}];b.callParent(arguments)},listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.jasapelayanan.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-jasapelayanan",onAfterRender:function(){var b=this.getReferences();b.JasaPelayananView.load();b.treeJasaPelayanan.setParams({JENIS_KUNJUNGAN:999})},onSelect:function(f,h){var i=this,j=i.getViewModel(),g=i.getReferences();g.treeJasaPelayanan.setParams({JENIS_KUNJUNGAN:h.get("ID")});g.treeJasaPelayanan.loadStore()},onSelectReport:function(m,t,n){var q=this.getReferences(),w=q.filter.getParameters(),p=q.ruanganref.getSelection()?q.ruanganref.getSelection().get("ID"):"0",r=q.carabayar.getSelection()?q.carabayar.getSelection().get("ID"):"0",v=q.dokterref.getSelection()?q.dokterref.getSelection().get("ID"):"0",s=q.treeJasaPelayanan.getSelection().length>0?q.treeJasaPelayanan.getSelection()[0].get("ID"):"1",u=Ext.JSON.decode(t.get("REPORT_PARAMS")),o=q.doctype.getDocType(),l={};w.PARAMETER.RUANGAN=s;w.PARAMETER.LAPORAN=p;w.PARAMETER.CARABAYAR=r;w.PARAMETER.DOKTER=v;l=Ext.apply(u.PARAMETER,w.PARAMETER);u.PARAMETER=l;u=Ext.apply(u,o);u.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",t.get("DESKRIPSI"),u,true);q.JasaPelayananView.deselect(n)}});Ext.define("laporan.kegiatanrird.DataView",{extend:"Ext.view.View",alias:"widget.kegiatanrird-data-view",viewModel:{type:"kegiatanrirdmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.kegiatanrird.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.kegiatanrirdmodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"19",STATUS:1}}}});Ext.define("laporan.kegiatanrird.Workspace",{extend:"Ext.form.Panel",xtype:"workspace-laporan-kegiatanrird",controller:"workspace-laporan-kegiatanrird",viewModel:{stores:{diagnosastore:{type:"diagnosa-store"}}},layout:"border",cls:"x-br-top",border:false,initComponent:function(){var b=this;b.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar ]",reference:"carabayarref"},{xtype:"referensi-combo",params:{JENIS:45},firstLoad:true,height:30,emptyText:"[Cara Keluar]",reference:"carakeluarrref"},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelect"},doAfterLoad:function(e,f,a){Ext.Array.each(e,function(c){if(c.get("ID")==0||c.get("ID")==8||c.get("ID")==11||c.get("ID")==7||c.get("ID")==10||c.get("ID")==12||c.get("ID")==6||c.get("ID")==4||c.get("ID")==9||c.get("ID")==5||c.get("ID")==1){a.remove(c)}})}},{xtype:"ruangan-tree",reference:"treekegiatanrird",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"19",STATUS:1}}}},border:false,reference:"kegiatanrirdView",listeners:{select:"onSelectReport"}}];b.callParent(arguments)},listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.kegiatanrird.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-kegiatanrird",onAfterRender:function(){var b=this.getReferences();b.kegiatanrirdView.load();b.treekegiatanrird.setParams({JENIS_KUNJUNGAN:999})},onSelect:function(f,h){var i=this,j=i.getViewModel(),g=i.getReferences();g.treekegiatanrird.setParams({JENIS_KUNJUNGAN:h.get("ID")});g.treekegiatanrird.loadStore()},onSelectReport:function(d,h,f){var a=this.getReferences(),b=a.filter.getParameters(),k=a.carabayarref.getSelection()?a.carabayarref.getSelection().get("ID"):"0",g=a.carakeluarrref.getSelection()?a.carakeluarrref.getSelection().get("ID"):"0",e=a.ruanganref.getSelection()?a.ruanganref.getSelection().get("ID"):"0",m=a.treekegiatanrird.getSelection().length>0?a.treekegiatanrird.getSelection()[0].get("ID"):"0",n=Ext.JSON.decode(h.get("REPORT_PARAMS")),l=a.doctype.getDocType();b.PARAMETER.CARABAYAR=k;b.PARAMETER.CARAKELUAR=g;b.PARAMETER.LAPORAN=e;b.PARAMETER.RUANGAN=m;n=Ext.apply(n,b);n=Ext.apply(n,l);n.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",h.get("DESKRIPSI"),n,true);a.kegiatanrirdView.deselect(f)}});Ext.define("laporan.kunjungan.DataView",{extend:"Ext.view.View",alias:"widget.kunjungan-data-view",viewModel:{type:"kunjunganmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.kunjungan.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.kunjunganmodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"12",STATUS:1}}}});Ext.define("laporan.kunjungan.Workspace",{extend:"Ext.form.Panel",xtype:"workspace-laporan-kunjungan",controller:"workspace-laporan-kunjungan",layout:"border",cls:"x-br-top",border:false,initComponent:function(){var b=this;b.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar ]",reference:"carabayar"},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelect"},doAfterLoad:function(e,f,a){Ext.Array.each(e,function(c){if(c.get("ID")==0){a.remove(c)}})}},{xtype:"ruangan-tree",reference:"treeKunjungan",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"12",STATUS:1}}}},border:false,reference:"kunjunganView",listeners:{select:"onSelectReport"}}];b.callParent(arguments)},listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.kunjungan.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-kunjungan",onAfterRender:function(){var b=this.getReferences();b.kunjunganView.load();b.treeKunjungan.setParams({JENIS_KUNJUNGAN:999})},onSelect:function(f,h){var i=this,j=i.getViewModel(),g=i.getReferences();g.treeKunjungan.setParams({JENIS_KUNJUNGAN:h.get("ID")});g.treeKunjungan.loadStore()},onSelectReport:function(k,r,l){var o=this.getReferences(),t=o.filter.getParameters(),p=o.carabayar.getSelection()?o.carabayar.getSelection().get("ID"):"0",n=o.ruanganref.getSelection()?o.ruanganref.getSelection().get("ID"):"0",q=o.treeKunjungan.getSelection().length>0?o.treeKunjungan.getSelection()[0].get("ID"):"0",s=Ext.JSON.decode(r.get("REPORT_PARAMS")),m=o.doctype.getDocType();t.PARAMETER.RUANGAN=q;t.PARAMETER.LAPORAN=n;t.PARAMETER.CARABAYAR=p;s=Ext.apply(s,t);s=Ext.apply(s,m);s.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",r.get("DESKRIPSI"),s,true);o.kunjunganView.deselect(l)}});Ext.define("laporan.layanan.DataView",{extend:"Ext.view.View",alias:"widget.layanan-data-view",viewModel:{type:"layananmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.layanan.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.layananmodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"13",STATUS:1}}}});Ext.define("laporan.layanan.Workspace",{extend:"Ext.form.Panel",xtype:"workspace-laporan-layanan",controller:"workspace-laporan-layanan",layout:"border",cls:"x-br-top",border:false,initComponent:function(){var b=this;b.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar ]",reference:"carabayar"},{xtype:"dokter-combo",height:30,emptyText:"[Dokter]",reference:"dokterref"},{xtype:"tindakan-combo",height:30,emptyText:"[Tindakan]",reference:"tindakanref"},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelect"}},{xtype:"ruangan-tree",reference:"treeLayanan",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"13",STATUS:1}}}},border:false,reference:"layananView",listeners:{select:"onSelectReport"}}];b.callParent(arguments)},listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.layanan.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-layanan",onAfterRender:function(){var b=this.getReferences();b.layananView.load();b.treeLayanan.setParams({JENIS_KUNJUNGAN:999})},onSelect:function(f,h){var i=this,j=i.getViewModel(),g=i.getReferences();g.treeLayanan.setParams({JENIS_KUNJUNGAN:h.get("ID")});g.treeLayanan.loadStore()},onSelectReport:function(m,u,n){var q=this.getReferences(),x=q.filter.getParameters(),p=q.ruanganref.getSelection()?q.ruanganref.getSelection().get("ID"):"0",s=q.carabayar.getSelection()?q.carabayar.getSelection().get("ID"):"0",w=q.dokterref.getSelection()?q.dokterref.getSelection().get("ID"):"0",r=q.tindakanref.getSelection()?q.tindakanref.getSelection().get("ID"):"0",t=q.treeLayanan.getSelection().length>0?q.treeLayanan.getSelection()[0].get("ID"):"0",v=Ext.JSON.decode(u.get("REPORT_PARAMS")),o=q.doctype.getDocType();x.PARAMETER.RUANGAN=t;x.PARAMETER.LAPORAN=p;x.PARAMETER.CARABAYAR=s;x.PARAMETER.DOKTER=w;x.PARAMETER.TINDAKAN=r;v=Ext.apply(v,x);v=Ext.apply(v,o);v.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",u.get("DESKRIPSI"),v,true);q.layananView.deselect(n)}});Ext.define("laporan.monitoring.DataView",{extend:"Ext.view.View",alias:"widget.monitoring-pelayanan-data-view",viewModel:{type:"monitoringpelayananmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.monitoring.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.monitoringpelayananmodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"20",STATUS:1}}}});Ext.define("laporan.monitoring.Workspace",{extend:"com.Form",xtype:"workspace-monitoring-pelayanan",controller:"workspace-monitoring-pelayanan",layout:"border",cls:"x-br-top",border:false,initComponent:function(){var b=this;b.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"combobox",reference:"statuslayanan",store:Ext.create("Ext.data.Store",{fields:["ID","NAME"],data:[{ID:"1",NAME:"Belum Diterima / Final"},{ID:"2",NAME:"Sudah Diterima / Final"}]}),queryMode:"local",displayField:"NAME",valueField:"ID",height:30,emptyText:"[Status]"},{xtype:"ruangan-combo",reference:"ruanganref",params:{JENIS:5},firstLoad:true,height:30,emptyText:"[Ruangan]",name:"RUANGAN",listeners:{select:"onSelectRuangan",specialkey:"onFocusEnter"}},{xtype:"laporan-button-doc",reference:"doctype",height:30}]},{region:"center",xtype:"monitoring-pelayanan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"20",STATUS:1}}}},border:false,reference:"monitoringView",listeners:{select:"onSelectReport"}}];b.callParent(arguments)},listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.monitoring.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-monitoring-pelayanan",onAfterRender:function(){var c=this,b=c.getReferences(),a=c.getView();b.monitoringView.load();b.ruanganref.load();b.statuslayanan.setValue(1)},onFocusEnter:function(a,b){if(b.getKey()===b.ENTER){this.getView().fireEvent("addbarang")}},onSelectRuangan:function(b,a){this.getView().fireEvent("select",a,1)},onSelectReport:function(i,g){var b=this.getReferences(),c=b.filter.getParameters(),h=b.statuslayanan.getSelection()?b.statuslayanan.getSelection().get("ID"):"",f=b.ruanganref.getSelection(),e=f?f.get("ID"):"",k=Ext.JSON.decode(g.get("REPORT_PARAMS")),j=b.doctype.getDocType();c.PARAMETER.PSTATUS=h;c.PARAMETER.RUANGAN=e;k=Ext.apply(k,c);k=Ext.apply(k,j);k.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",g.get("DESKRIPSI"),k,true);b.monitoringView.deselect(g)}});Ext.define("laporan.pendapatan.DataView",{extend:"Ext.view.View",alias:"widget.pendapatan-data-view",viewModel:{type:"pendapatanmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.pendapatan.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.pendapatanmodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"18",STATUS:1}}}});Ext.define("laporan.pendapatan.Workspace",{extend:"Ext.form.Panel",xtype:"workspace-laporan-pendapatan",controller:"workspace-laporan-pendapatan",layout:"border",cls:"x-br-top",border:false,initComponent:function(){var b=this;b.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar]",reference:"carabayar"},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelect"}},{xtype:"ruangan-tree",reference:"treePendapatan",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"18",STATUS:1}}}},border:false,reference:"pendapatanView",listeners:{select:"onSelectReport"}}];b.callParent(arguments)},listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.pendapatan.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-pendapatan",onAfterRender:function(){var b=this.getReferences();b.pendapatanView.load();b.treePendapatan.setParams({JENIS_KUNJUNGAN:999})},onSelect:function(f,h){var i=this,j=i.getViewModel(),g=i.getReferences();g.treePendapatan.setParams({JENIS_KUNJUNGAN:h.get("ID")});g.treePendapatan.loadStore()},onSelectReport:function(f,n,k){var o=this,d=o.getReferences(),e=d.filter.getParameters(),a=d.carabayar.getSelection()?d.carabayar.getSelection().get("ID"):"0",q=d.ruanganref.getSelection()?d.ruanganref.getSelection().get("ID"):"0",m=d.treePendapatan.getSelection(),g=m.length>0?m[0].get("ID"):1,p=Ext.JSON.decode(n.get("REPORT_PARAMS")),l=d.doctype.getDocType();e.PARAMETER.CARABAYAR=a;e.PARAMETER.RUANGAN=g;e.PARAMETER.LAPORAN=q;p=Ext.apply(p,e);p=Ext.apply(p,l);p.ALLOW_DOWNLOAD=true;o.getView().fireEvent("requestreport",n.get("DESKRIPSI"),p,true);d.pendapatanView.deselect(k)}});Ext.define("laporan.penerimaankasir.Workspace",{extend:"com.Form",xtype:"workspace-laporan-penerimaan-kasir",controller:"workspace-laporan-penerimaan-kasir",layout:"border",cls:"x-br-top",border:false,initComponent:function(){var a=this;a.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"transaksi-kasir-list",reference:"transaksikasirlist",flex:1},{xtype:"laporan-button-doc",reference:"doctype",height:30}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"14",STATUS:1}}}},border:false,reference:"penerimaanKasirView",listeners:{select:"onSelectReport"}}];a.callParent(arguments)},listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.penerimaankasir.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-penerimaan-kasir",onAfterRender:function(){var d=this,a=d.getView(),b=d.getReferences(),c=a.app.xpriv("1209");b.transaksikasirlist.setGridConfig({paging:true,filter:{enabled:c,kasir:c}});b.penerimaanKasirView.load()},onSelectReport:function(j,a,h){var c=this,f=c.getView(),e=this.getReferences(),d=e.transaksikasirlist.getSelection(),b={PARAMETER:{}},i=Ext.JSON.decode(a.get("REPORT_PARAMS")),g=e.doctype.getDocType();b.PARAMETER.KASIR=f.app.usrid;if(Ext.isArray(d)){b.PARAMETER.NOMOR="";Ext.Array.each(d,function(l,k){b.PARAMETER.NOMOR+="'"+l.get("NOMOR");b.PARAMETER.KASIR=l.get("KASIR");if(k<(d.length-1)){b.PARAMETER.NOMOR+="',"}else{b.PARAMETER.NOMOR+="'"}})}i=Ext.apply(i,b);i=Ext.apply(i,g);i.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",a.get("DESKRIPSI"),i,false);e.penerimaanKasirView.deselect(h)}});Ext.define("laporan.pengunjung.DataView",{extend:"Ext.view.View",alias:"widget.pengunjung-data-view",viewModel:{type:"pengunjungmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.pengunjung.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.pengunjungmodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"11",STATUS:1}}}});Ext.define("laporan.pengunjung.Workspace",{extend:"Ext.form.Panel",xtype:"workspace-laporan-pengunjung",controller:"workspace-laporan-pengunjung",layout:"border",cls:"x-br-top",border:false,initComponent:function(){var b=this;b.items=[{region:"west",width:300,cls:"x-br-right",border:false,defaults:{margin:5},layout:{type:"vbox",align:"stretch"},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar]",reference:"carabayar"},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelectRuangan"},doAfterLoad:function(e,f,a){Ext.Array.each(e,function(c){if(c.get("ID")!=1&&c.get("ID")!=2&&c.get("ID")!=3){a.remove(c)}})}},{xtype:"ruangan-tree",reference:"treePengunjung",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"11",STATUS:1}}}},border:false,reference:"pengunjungView",listeners:{select:"onSelectReport"}}];b.callParent(arguments)},listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.pengunjung.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-pengunjung",onAfterRender:function(){var b=this.getReferences();b.pengunjungView.load();b.treePengunjung.setParams({JENIS_KUNJUNGAN:999})},onSelectRuangan:function(f,h){var i=this,j=i.getViewModel(),g=i.getReferences();g.treePengunjung.setParams({JENIS_KUNJUNGAN:h.get("ID")});g.treePengunjung.loadStore()},onSelectReport:function(k,r,l){var o=this.getReferences(),t=o.filter.getParameters(),p=o.carabayar.getSelection()?o.carabayar.getSelection().get("ID"):"0",n=o.ruanganref.getSelection()?o.ruanganref.getSelection().get("ID"):"0",q=o.treePengunjung.getSelection().length>0?o.treePengunjung.getSelection()[0].get("ID"):"0",s=Ext.JSON.decode(r.get("REPORT_PARAMS")),m=o.doctype.getDocType();t.PARAMETER.RUANGAN=q;t.PARAMETER.LAPORAN=n;t.PARAMETER.CARABAYAR=p;s=Ext.apply(s,t);s=Ext.apply(s,m);s.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",r.get("DESKRIPSI"),s,true);o.pengunjungView.deselect(l)}});Ext.define("laporan.rekammedis.DataView",{extend:"Ext.view.View",alias:"widget.rekammedis-data-view",viewModel:{type:"rekammedismodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.rekammedis.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.rekammedismodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"17",STATUS:1}}}});Ext.define("laporan.rekammedis.Workspace",{extend:"Ext.form.Panel",xtype:"workspace-laporan-rekammedis",controller:"workspace-laporan-rekammedis",viewModel:{stores:{diagnosastore:{type:"diagnosa-store",queryParams:{ICD:1}}}},layout:"border",cls:"x-br-top",border:false,initComponent:function(){var b=this;b.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"laporan-filter",reference:"filter"},{xtype:"referensi-combo",params:{JENIS:10},firstLoad:true,height:30,emptyText:"[Cara Bayar ]",reference:"carabayarref"},{xtype:"referensi-combo",params:{JENIS:45},firstLoad:true,height:30,emptyText:"[Cara Keluar]",reference:"carakeluarrref"},{xtype:"combobox",emptyText:"[Kode ICD-Deskripsi]",bind:{store:"{diagnosastore}"},hideTrigger:true,reference:"kodeicdref",typeAhead:true,queryParam:"QUERY",displayField:"STR",valueField:"CODE",minChars:2,tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="x-boundlist-item"><strong>{CODE}</strong> - {STR}</div>',"</tpl>"),displayTpl:Ext.create("Ext.XTemplate",'<tpl for=".">',"{CODE} - {STR}","</tpl>"),listeners:{focus:"onBeforeQuery"}},{xtype:"referensi-combo",reference:"ruanganref",params:{JENIS:15},firstLoad:true,height:30,emptyText:"[Ruangan]",listeners:{select:"onSelect"},doAfterLoad:function(e,f,a){Ext.Array.each(e,function(c){if(c.get("ID")==0||c.get("ID")==8||c.get("ID")==11||c.get("ID")==7||c.get("ID")==10||c.get("ID")==12||c.get("ID")==6||c.get("ID")==4||c.get("ID")==9||c.get("ID")==5){a.remove(c)}})}},{xtype:"numberfield",reference:"limitref",value:0,minValue:0,emptyText:"[Limit]"},{xtype:"checkbox",reference:"utamaref",inputValue:1,uncheckedValue:0,boxLabel:"Primary",id:"utama"},{xtype:"ruangan-tree",reference:"treeRekamMedis",flex:1},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"17",STATUS:1}}}},border:false,reference:"rekamMedisView",listeners:{select:"onSelectReport"}}];b.callParent(arguments)},listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.rekammedis.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-rekammedis",onAfterRender:function(){var a=this.getReferences();a.rekamMedisView.load();a.treeRekamMedis.setParams({JENIS_KUNJUNGAN:999})},onSelect:function(d,h){var g=this,i=g.getViewModel(),f=g.getReferences();f.treeRekamMedis.setParams({JENIS_KUNJUNGAN:h.get("ID")});f.treeRekamMedis.loadStore()},onSelectReport:function(e,n,g){var b=this.getReferences(),d=b.filter.getParameters(),o=b.carabayarref.getSelection()?b.carabayarref.getSelection().get("ID"):"0",h=b.carakeluarrref.getSelection()?b.carakeluarrref.getSelection().get("ID"):"0",a=b.kodeicdref.getSelection()?b.kodeicdref.getSelection().get("CODE"):"0",m=b.limitref.getValue()?b.limitref.getValue():0,l=b.utamaref.getValue()?1:0,f=b.ruanganref.getSelection()?b.ruanganref.getSelection().get("ID"):"0",k=b.treeRekamMedis.getSelection().length>0?b.treeRekamMedis.getSelection()[0].get("ID"):"0",q=Ext.JSON.decode(n.get("REPORT_PARAMS")),p=b.doctype.getDocType();d.PARAMETER.CARAKELUAR=h;d.PARAMETER.RUANGAN=k;d.PARAMETER.LAPORAN=f;d.PARAMETER.CARABAYAR=o;d.PARAMETER.KODEICD=a;d.PARAMETER.UTAMA=l;d.PARAMETER.LMT=m;q=Ext.apply(q,d);q=Ext.apply(q,p);q.ALLOW_DOWNLOAD=true;this.getView().fireEvent("requestreport",n.get("DESKRIPSI"),q,true);b.rekamMedisView.deselect(g)},onBeforeQuery:function(b){if(b.combo){b.combo.getStore().removeAll()}}});Ext.define("laporan.rl.DataView",{extend:"Ext.view.View",alias:"widget.rl-data-view",viewModel:{type:"rlmodel"},autoScroll:true,cls:"laporan-main laporan-dataview",bind:{store:"{store}"},itemSelector:"div.thumb-wrap",tpl:Ext.create("Ext.XTemplate",'<tpl for=".">','<div class="thumb-wrap">','<a class="thumb" href="#">','<div class="thumb-icon"></div>','<div class="thumb-title-container">','<div class="thumb-title"><strong>{KODE}</strong></div>','<div class="thumb-title-medium"><strong>{DESKRIPSI}</strong></div>','<div class="thumb-title-small">download: {DESKRIPSI}</div>',"</div>",'<div class="thumb-download"></div>',"</a>","</div>","</tpl>"),load:function(){var b=this.getViewModel().get("store");if(b){b.removeAll();b.load()}}});Ext.define("laporan.rl.Model",{extend:"Ext.app.ViewModel",alias:"viewmodel.rlmodel",stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"10",STATUS:1}}}});Ext.define("laporan.rl.Workspace",{extend:"Ext.form.Panel",xtype:"workspace-laporan-rl",controller:"workspace-laporan-rl",layout:"border",cls:"x-br-top  x-br-right",border:false,initComponent:function(){var b=this;b.items=[{region:"west",width:300,cls:"x-br-right",layout:{type:"vbox",align:"stretch"},defaults:{margin:5},border:false,items:[{xtype:"segmentedbutton",reference:"jenis",items:[{text:"Kemkes",iconCls:"simpel-kemkes",inputValue:"1001",pressed:true},{text:"Dinkes",inputValue:"1002"}],listeners:{toggle:"onToggleJenis"}},{xtype:"laporan-filter",reference:"filter"},{xtype:"laporan-button-doc",height:30,reference:"doctype"}]},{region:"center",xtype:"laporan-data-view",viewModel:{stores:{store:{type:"laporan-detil-store",queryParams:{JENIS:"1001",STATUS:1}}}},border:false,reference:"rlview",listeners:{select:"onSelectReport"}}];b.callParent(arguments)},listeners:{afterrender:"onAfterRender"}});Ext.define("laporan.rl.WorkspaceController",{extend:"Ext.app.ViewController",alias:"controller.workspace-laporan-rl",onAfterRender:function(){var b=this.getReferences();b.rlview.load()},onSelectReport:function(b,k,e){var f=this.getReferences(),a=this.getView(),h=f.filter.getParameters(),d=Ext.JSON.decode(k.get("REPORT_PARAMS")),g=f.doctype.getDocType();d=Ext.apply(d,h);d=Ext.apply(d,g);d.ALLOW_DOWNLOAD=true;a.fireEvent("requestreport",k.get("DESKRIPSI"),d,true);f.rlview.deselect(e)},onToggleJenis:function(f,b,e){var d=this.getReferences(),a=d.rlview.getStore();if(a){a.setQueryParams({JENIS:b.inputValue,STATUS:1});d.rlview.load()}}});